---
title: js数据类型
date: 2021-11-14
tags:
 - javascript
 - 数据类型
categories:
 -  JS
---


### 原始(Primitive)类型
在 JS 中，存在着 6 种原始值，分别是：

+ `boolean`
+ `null`
+ `undefined`
+ `number`
+ `string`
+ `symbol`

 1. 原始类型存储的都是值，是没有函数可以调用的。此时你肯定会有疑问，这不对呀，明明 `'1'.toString()` 是可以使用的。其实在这种情况下，`'1'` 已经不是原始类型了，而是被强制转换成了 `String` 类型也就是对象类型，所以可以调用 `toString` 函数。
 2. `string` 类型是不可变的，无论你在 `string` 类型上调用何种方法，都不会对值有改变。
 
### 对象(Object)类型 
在 JS 中，除了原始类型那么其他的都是对象类型了。对象类型和原始类型不同的是，==原始类型存储的是值，对象类型存储的是地址（指针）==。当你创建了一个对象类型的时候，计算机会在内存中帮我们开辟一个空间来存放值，但是我们需要找到这个空间，这个空间会拥有一个地址（指针）。

### 类型转换
首先我们要知道，在 JS 中类型转换只有三种情况，分别是：
+ 转换为布尔值
+ 转换为数字
+ 转换为字符串

*注意图中有一个错误，Boolean 转字符串这行结果我指的是 true 转字符串的例子，不是说 Boolean、函数、Symblo 转字符串都是* `true`
![类型转换表格](https://user-gold-cdn.xitu.io/2018/11/15/16716dec14421e47?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)

##### 转Boolean
在条件判断时，除了 `undefined， null， false， NaN， ''， 0， -0`，其他所有值都转为 `true`，包括所有对象。

##### 对象转原始类型
对象在转换类型的时候，会调用内置的 `[[ToPrimitive]]` 函数，对于该函数来说，算法逻辑一般来说如下：

+ 如果已经是原始类型了，那就不需要转换了
+ 如果需要转字符串类型就调用 `x.toString()`，转换的结果为基础类型的话就返回转换的值。不是字符串类型的话就先调用 `valueOf`，结果不是基础类型的话再调用 `toString`
+ 调用 `x.valueOf()`，如果转换为基础类型，就返回转换的值
+ 如果都没有返回原始类型，就会报错

当然你也可以重写 `Symbol.toPrimitive` ，该方法在转原始类型时调用优先级最高。

 ``` js
let a = {
  valueOf() {
    return 0
  },
  toString() {
    return '1'
  },
  [Symbol.toPrimitive]() {
    return 2
  }
}


1 + a // => 3
```

##### 四则运算符
加法运算符不同于其他几个运算符，它有以下几个特点：
+ 运算中其中一方为字符串，那么就会把另一方也转换为字符串
+ 如果一方不是字符串或者数字，那么会将它转换为数字或者字符串

那么对于除了加法的运算符来说，只要其中一方是数字，那么另一方就会被转为数字

##### 比较运算符 
+ 如果是对象，就通过 `toPrimitive` 转换对象
+ 如果是字符串，就通过 `unicode` 字符索引来比较

### 包装类
JS中有三个基本数据类型是比较特殊的存在，分别是 `String、number、Boolean` ，每当我们给原始值赋属性值时 后台都会给我们偷偷转换 调用包装类

区别：
> 引用类型和基本包装对象的区别在于，生存期，引用类型所创建的对象，在执行期间一直在内存中，而基本包装对象只是存在一瞬间（也就是执行完后变量就变成 `null`）。

所以，JS中只有对象才有属性和方法，原始值没有属性和方法。